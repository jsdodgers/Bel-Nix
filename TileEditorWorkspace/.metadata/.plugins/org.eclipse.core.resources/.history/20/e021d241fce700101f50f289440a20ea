import javax.swing.*;
import java.awt.*;
import java.util.*; //when in doubt, use a star
import java.awt.event.; //idk why i need this when i have java.awt., but i do
public class game extends JFrame{
int key = 0; //key pressed
int x = 230; //x coord of player
int y = 75; //y of player
int money = 0; //total money earned
int inv = 0, held = 0; // inv = money you have picked up, but havnt 'deposited' by going to surface; held = # of blocks mined
int dirtvalue = 10, stonevalue = 15, rubyvalue = 45, goldvalue = 60, artifactvalue = 100; //the money value of each type of block (artifact is just the white block, blocktype 4)
int[] blockx = new int[16]; //the x coord of each block
int[] blocky = new int[16]; //the y of each block
int[] blocktype = new int[15*16]; //block type, the number is read top left to bottom right, like a book, confusing when combined with blockx and blocky
boolean stars = false; //oops this was a variable from when i was just playing with graphics... ill leave it so i can have this comment
boolean init = false; //since i cant call init from the main method, idk how to call it, so i just put it in paint since it automatically runs, i used this variable so it only autoruns init once
boolean[] taken = new boolean[15*16]; //whether or not you have taken block number []
Color brown = new Color(169,69,19); //duh? dirt 
public void paint(Graphics g)
{
    if(key == 37 && x > 20)//left
        x -= 30;
    if(key == 40 && y < 525)//down
        y += 30;
    if(key == 38 && y > 80)//up
        y -= 30;
    if(key == 39 && x < 470)//right
        x += 30;
    if(key == 32)
        init();
    /*if(key == 83)//s
    {

        //code for shopping...  tomorrow?


    }*/

    if(init == false) //if this is the first time, run init(); LET ME KNOW IF YOU HAVE A BETTER WAY OF DOING THIS!!!
    {
        init();
        init = true;
    }
    g.clearRect(0,0,getWidth(),getHeight()); //clear the screen of old stuff
    g.setColor(Color.black);
    g.fillRect(0,90,getWidth(),getHeight()); //recently added: behind the blocks that you mine is now black, to seem more underground-ish
    for (int i = 0; i<15; i++)
    {
        for (int k = 0; k<16; k++) //"i" and "k" are the row/column numbers, not sure which is which, had a bit of a problem earlier and now im scared to change it, cause i got it working again.
        {
            if(taken[k*15+i] == false && x == 20+k*30 && y == 105+i*30 && held == 4)//if your on a block but have too many items held (4) move back, based on last key pressed
            {
                if(key == 37)//left
                x += 30;
                if(key == 40)//down
                y -= 30;
                if(key == 38)//up
                y += 30;
                if(key == 39)//right
                x -= 30;                    
            }
            switch(blocktype[i*15 + k]) //set the color of the square in question, based on blocktype number
            {
                case 0://dirt
                g.setColor(brown);
                break;
                case 1://stone
                g.setColor(Color.gray);
                break;
                case 2://ruby
                g.setColor(Color.red);
                break;
                case 3://gold
                g.setColor(Color.yellow);
                break;
                case 4://white stuff.. lol
                g.setColor(Color.white);
                break;
            }
            if(taken[k*15+i] == false && x == 20+k*30 && y == 105+i*30) //if your on a block and have room
            {
                taken[k*15+i] = true; //remove it
                switch(blocktype[i*15 + k]) //add a block to "held" and add the worth of it to your inv
                {
                    case 0://dirt
                    inv += dirtvalue;
                    held++;
                    break;
                    case 1://rock
                    inv += stonevalue;
                    held++;
                    break;
                    case 2://ruby
                    inv += rubyvalue;
                    held++;
                    break;
                    case 3://gold
                    inv += goldvalue;
                    held++;
                    break;
                    case 4:
                    inv += artifactvalue;
                    held++;
                    break;
                }
            }
            if(taken[k*15+i] == false) //if the block is still there, draw it
                g.fillRect(5+k*30,90+i*30,30,30);
        }
    }

    Polygon shape = new Polygon(); //i should rename this 'player'
    shape.addPoint(x-15,y+15);
    shape.addPoint(x+15,y+15);
    shape.addPoint(x,y-15);
    g.setColor(Color.red);
    g.drawPolygon(shape);
    g.drawOval(x-25,y-25,50,50); //this was going to involve my friends idea of only being able to see blocks inside this circle, havnt done anything yet.
    if(y==75) //if your on the surface...
    {
        held = 0;
        money += inv; //deposit money from your inventory, and set your 'held' items to 0
        inv = 0;
    }
    g.setColor(Color.BLACK);
    g.setFont(new Font("Sans-Serif", Font.BOLD, 20));
    g.drawString("Money: $" + money,10,50); //draw money, top left of screen
    g.drawString("Held Blocks: " + held,345,50); //draw number of blocks held, top right
}
public static void main(String[] args) 
{
    game a = new game(); //just setting up the window itself
    a.setSize(490,545);
    a.setResizable(false);
    a.setBackground(Color.cyan);
    a.setDefaultCloseOperation(EXIT_ON_CLOSE);
    a.setVisible(true);


}
public void init() //this method sets all the start info, right now just blocktype and taken = false
{
    x = 230;
    y = 75;

    for(int i = 0; i<16*15; i++)
    {
        if(i < 16)//depth 1 = dirt
        {
            blocktype[i] = 0;

        }
        if(i > 15 && i < 64 )//depth 2-3 = stone or dirt
        {
            blocktype[i] = (int)Math.round(Math.random());
        }
        if(i > 63 && i < 144)//depth 4-8 = ~8% chance to include gold/ruby; less dirt
        {
            if(Math.random()*100 > 92)
            {
                blocktype[i] = (int)Math.round(Math.random()*3+.3);
            }
            else
                blocktype[i] = (int)Math.round(Math.random());
        }
        if(i > 143)//depth 9+ = ~20% chance to include gold/ruby; low dirt; ~5% chance to include (Diamond? idk yet, white at the moment)
        {int roll = (int)(Math.random()*100);
            if(roll > 80)
                blocktype[i] = (int)Math.round(Math.random()*2+.4);
            if(roll > 95)
                blocktype[i] = (int)Math.round(Math.random()*4+.4);
            if(roll <= 80)
                blocktype[i] = 1;
        }
    taken[i] = false;
    }


}

public void processEvent(AWTEvent e){ //i honestly dont really understand the keybindings too well, i got this bit from miners4k, a game by the maker of minecraft
    switch (e.getID()){
        case WindowEvent.WINDOW_CLOSING:
        System.exit(0);
        break;
        case KeyEvent.KEY_PRESSED:
        key = ((KeyEvent)e).getKeyCode();
        System.out.println(key);
        repaint();
         break;
    }


}
}