import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Arrays;
import java.util.Random;


public class Generator
{
	public static void main(String[] args) {
		System.out.println(Arrays.toString(args));
		System.out.println("[hiklsd]".substring(1,"[hiklsd]".length()-1));
		if (args.length!=4) {
			System.out.println("Invalid arguments");
		}
		else {
			try {
				Random r = new Random();
				String output = new String();
				Parser parser = new Parser(args[2],args[0]);
				Grammar grammar = parser.parse();
				for (int n=0;n<Integer.parseInt(args[1]);n++) {
					output += grammar.generate(grammar, r) + "\n";
				}
				FileWriter file = new FileWriter(args[3]);
				BufferedWriter out = new BufferedWriter(file);
				out.write(output.replace("NL", "\n"));
				out.close();
			}
			catch (FileNotFoundException e) {
				System.out.println("File not found.");
			}
			catch (IOException e)
			{
				System.out.println("IOException");
			}
		}
	}
}
